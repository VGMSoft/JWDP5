(()=>{function e(e,t){e.onchange=function(r){return e.classList.remove("is-invalid"),e.classList.remove("is-valid"),t.test(r.target.value.trim())?(e.classList.add("is-valid"),1):(e.classList.add("is-invalid"),0)}}cart.cartToArray().forEach((function(e){return function(e){var t=document.querySelector("#template"),r=document.importNode(t.content,!0);r.querySelector(".productName").innerHTML=e.name,r.querySelector(".quantity").value=e.quantity,r.querySelector(".unityPrice").innerHTML=e.price,r.querySelector(".totalPrice").innerHTML="".concat(cart.totalProductPrice(e),"&#128;"),document.querySelector(".globalTotal").innerHTML="".concat(cart.globalTotal(),"&#128;"),function(e,t){e.querySelector(".reduceQuantity").onclick=function(e){var r=e.target.parentElement.parentElement.querySelector(".quantity");r.value--,cart.userQuantityModifier(t,r,e)},e.querySelector(".increaseQuantity").onclick=function(e){var r=e.target.parentElement.parentElement.querySelector(".quantity");r.value++,cart.userQuantityModifier(t,r,e)},cart.updateAmount()}(r,e),document.querySelector(".templateContainer").appendChild(r)}(e)})),document.querySelector(".form").onsubmit=function(e){var t,r,a,c,n;e.preventDefault(),0!==Object.keys(cart.getCart()).length?(t={contact:(a=document.querySelector("#firstName").value.trim(),c=document.querySelector("#lastName").value.trim(),n={firstName:a,lastName:c,address:document.querySelector("#address").value.trim(),city:document.querySelector("#city").value.trim(),email:document.querySelector("#email").value.trim()},localStorage.setItem("".concat(a," ").concat(c),JSON.stringify(n)),n),products:Object.keys(cart.getCart())},r={method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json; charset=utf-8"}},fetch("".concat(apiUrl,"/api/cameras/order"),r).then((function(e){return e.json()})).then((function(e){sessionStorage.setItem(e.orderId,JSON.stringify(t.contact)),window.location.href="./confirmation.html?orderId=".concat(e.orderId,"&total=").concat(cart.globalTotal())}))):alert("Votre panier est vide, ajouter un article pour passer commande")},e(document.querySelector("#firstName"),/^[a-zA-Z-,\séè]+$/),e(document.querySelector("#lastName"),/^[a-zA-Z-,\séè]+$/),e(document.querySelector("#address"),/^([a-zA-Z0-9-\séè]+){1,8}$/),e(document.querySelector("#city"),/^[a-zA-Z-,\séè]+$/),e(document.querySelector("#email"),/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)})();
