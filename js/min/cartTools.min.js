(()=>{function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}new(function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e)}var a,n;return a=e,(n=[{key:"getCartItems",value:function(){return JSON.parse(localStorage.getItem("cart"))||{}}},{key:"setCartItem",value:function(t){localStorage.setItem("cart",JSON.stringify(t))}},{key:"emptyCart",value:function(){localStorage.clear(),location.reload()}},{key:"removeItem",value:function(t){var e=this.getCartItems();delete e[t._id],this.setCartItem(e),location.reload()}},{key:"cartToArray",value:function(){return Object.values(this.getCartItems())}},{key:"addItem",value:function(t,e){var a=this.getCartItems();null==a[t._id]?(a[t._id]={},a[t._id].option=[],a[t._id]._id=t._id,a[t._id].name=t.name,a[t._id].price="".concat(t.price/100,"€"),a[t._id].option.push(e),a[t._id].quantity=1):(a[t._id].quantity++,a[t._id].option.push(e)),this.setCartItem(a)}},{key:"userQuantityModifier",value:function(t,e,a){this.updateQuantity(t._id,e.value);var n=a.target.parentElement.parentElement.parentElement.parentElement.querySelector(".totalPrice"),r=t.price.slice(0,-1)*this.getCartItems()[t._id].quantity,i=document.querySelector(".globalTotal");n.innerHTML="".concat(r,"&#128;"),i.innerHTML="".concat(this.globalTotal(),"&#128;"),this.updateAmount(),a.target.parentElement.parentElement.querySelector(".quantity").value<1&&(this.removeItem(t),alert("Votre produit va être supprimé du panier."))}},{key:"updateQuantity",value:function(t,e){var a=this.getCartItems();a[t].quantity=e,this.setCartItem(a)}},{key:"getAmount",value:function(){var t=document.querySelector(".cartContent");0===JSON.parse(localStorage.getItem("amount"))?(t.classList.add("d-none"),t.classList.remove("d-inline-block")):(t.innerHTML=localStorage.getItem("amount"),t.classList.add("d-inline-block"),t.classList.remove("d-none"))}},{key:"updateAmount",value:function(){var t=this.cartToArray().reduce((function(t,e){return t+parseInt(e.quantity)}),0);localStorage.setItem("amount",t)}},{key:"showAmount",value:function(){this.updateAmount(),this.getAmount()}},{key:"totalProductPrice",value:function(t){return parseInt(t.price)*parseInt(t.quantity)}},{key:"globalTotal",value:function(){var t=this,e=this.cartToArray().reduce((function(e,a){return e+t.totalProductPrice(a)}),0);return 0!==e&&document.querySelector(".cartIsEmpty").classList.replace("d-flex","d-none"),e}}])&&t(a.prototype,n),e}())})();